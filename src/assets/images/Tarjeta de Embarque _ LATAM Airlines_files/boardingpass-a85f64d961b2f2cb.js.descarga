(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{63424:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return M},default:function(){return V}});var n,s,a,i,o,u=t(72640),d=t(59499),l=t(50029),c=t(87794),g=t.n(c),m=t(67294),p=t(9008),h=t.n(p),f=t(11163),E=t(57404),P=t(15533),v=t(30071),C=t(2068),x=t(69974),S=t(27974),b=t(32861),I=t(42832),y=t(99408),B=t(52011),N=t(63850),_=t(38852),R=t(71383),A=t(19521),O=A.default.div(n||(n=(0,R.Z)(["\n  .home-row {\n    margin-top: 0;\n\n    ","\n\n    ","\n  }\n  @media print {\n    display: ",";\n  }\n"])),(function(e){return e.theme.TOKENS.BREAKPOINTS.medium(s||(s=(0,R.Z)(["\n      margin-top: 24px;\n      padding-bottom: ",";\n      flex-direction: column;\n      overflow-x: hidden;\n  "])),(function(e){return e.showEmergencyContactForm?"72px":"0"}))}),(function(e){return e.theme.TOKENS.BREAKPOINTS.large(a||(a=(0,R.Z)(["\n      flex-direction: inherit;\n      padding-bottom: 72px;\n  "])))}),(function(e){return e.isPrintableBP?"none":"block"})),T=(A.default.div(i||(i=(0,R.Z)(["\n  padding: 0 16px;\n  padding-bottom: 4.625rem;\n"]))),A.default.h3(o||(o=(0,R.Z)(["\n  color: ",";\n  font-size: 18px;\n  font-style: italic;\n  font-weight: lighter;\n  line-height: 21px;\n"])),(function(e){return e.theme.TOKENS.COLORS.primary.dark})),t(8829)),w=t(82332),D=t(85893),L=function(){var e=(0,l.Z)(g().mark((function e(r){var t,n,s,a,i,o,u,l,c,m,p;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.orderId&&!["undefined","null"].includes(r.orderId),n=r.lastName&&!["undefined","null"].includes(r.lastName),!(t&&n)){e.next=21;break}return e.prev=4,e.next=7,x.IW.invoke({query:{userId:r.user&&r.user.userId||void 0,lastName:r.lastName,action:"view"},path:{orderId:r.orderId},headers:(0,d.Z)({},B.U5.ACTION_NAME,(0,N.setFCIActionName)({context:_.Bz.CONTEXT.BOARDP,component:_.Bz.COMPONENT.HOME,action:_.Bz.ACTION.LOAD}))});case 7:a=e.sent,i=a.data,null!==(s=i.orderCharacteristics)&&void 0!==s&&s.includes(y.$W.ORDER_WITHOUT_ITINERARY)?(r.setBoardingPassStatus(y.BP.CONTACT_CENTER_HELP),r.setLoadingBoardingPass(!1)):(r.setOrderWithDerivableCkinError(i.orderWithDerivableCkinError),r.setOrderData(i),r.setContactRequired(i.emergencyContactRequired)),e.next=21;break;case 12:e.prev=12,e.t0=e.catch(4),r.setBoardingPassStatus(y.BP.ERROR),r.setLoadingBoardingPass(!1),o={message:e.t0&&e.t0.message,status:e.t0&&e.t0.status,statusText:e.t0&&e.t0.response&&e.t0.response.statusText,statusCode:e.t0&&e.t0.response&&e.t0.response.status},u=o.message,l=o.status,c=o.statusCode,m=o.statusText||u||y.GA.NO_MESSAGE,p=c||l||y.GA.NO_STATUS_CODE,b.analytics.pageLoad({action:y.GA.VIEW,title:y.GA.ERROR,pageName:y.GA.ERROR,custom:{order:r.orderId,errorName:"There was a problem getting your Boarding Pass",message:"".concat(m,": ").concat(p)}});case 21:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(r){return e.apply(this,arguments)}}(),j=function(e,r){if(r.showDangerousItemsView){var t=r.segments.length>1||r.passengers.length>1;return(0,D.jsx)(E.MZ,{setAcceptedDangerousItems:r.setAcceptedDangerousItems,hasTopTabs:t,boardingPassStatus:r.boardingPassStatus})}return r.showStatusComponent?(0,D.jsx)(E.Py,{}):r.errorSavingContact?(0,D.jsx)(E.XN,{t:e}):r.acceptEmergencySeat?r.showStatusComponent||r.loadingBoardingPass?null:(0,D.jsxs)(D.Fragment,{children:[r.showDerivableCheckinError&&(0,D.jsx)(E.su,{t:e,orderId:r.orderId,tripDetailsURL:r.MY_TRIPS_URLS.SECOND_DETAIL,country:r.country,lang:r.lang,user:r.user}),!r.showDerivableCheckinError&&(0,D.jsxs)(E.X2,{className:"home-row",children:[(0,D.jsx)("div",{className:"col-info-bp",children:(0,D.jsx)(E.Ke,{t:e,segmentTabs:r.segmentTabs,passengerTabs:r.passengerTabs,boardingPassStatus:r.boardingPassStatus,segment:r.segment,expiredAlertHeight:r.expiredAlertHeight,passenger:r.passenger,orderId:r.orderId,showEmergencyContactForm:r.showEmergencyContact})}),r.isDesktop&&(0,D.jsx)(E.QE,{t:e})]})]}):(0,D.jsx)(E.vi,{t:e,orderId:r.orderId,tripDetailsURL:r.MY_TRIPS_URLS.SECOND_DETAIL,isFciError:r.isFciError})},k=function(e,r){return(0,D.jsxs)(m.Fragment,{children:[(0,D.jsx)(h(),{children:(0,D.jsx)("title",{children:e("xp_boardp_web_index_title",{output:"string"})})}),(0,D.jsx)(E.bs,{t:e,user:r.user,home:r.home,orderId:r.orderId,boardingPassStatus:r.boardingPassStatus,originalCountry:r.originalCountry}),(0,D.jsxs)("main",{id:"main-content",children:[(0,D.jsx)(v.a,{id:"loader-bp",open:r.loadingBoardingPass,title:e("xp_boardp_web_main_searchingBoardingPass",{output:"string"})}),r.showEmergencySeatDisclaimer?(0,D.jsx)(E.c5,{orderId:r.orderId,selectedPassengers:r.passengers}):j(e,r)]}),(0,D.jsx)(P.Footer,{home:r.home})]})},F=function(e){var r=e.t,t=e.user,n=e.home,s=e.lang,a=e.country,i=e.features,o=e.originalCountry,d=(0,f.useRouter)(),l=d.query,c=l.orderId,g=l.lastName,p=(0,m.useContext)(C.d),h=p.boardingPassStatus,P=p.setBoardingPassStatus,v=p.loadingBoardingPass,x=p.setLoadingBoardingPass,B=p.orderWithDerivableCkinError,N=p.setOrderWithDerivableCkinError,_=p.segment,R=p.segments,A=p.passenger,j=p.passengers,F=p.setOrderData,H=p.setHomeValue,M=p.setLangValue,V=p.setCountryValue,G=p.setFeatures,U=p.expiredAlertHeight,W=p.setExpiredAlertHeight,Y=p.itineraryBP,Z=p.urlParamsForUpdating,q=p.showEmergencySeatDisclaimer,K=p.acceptEmergencySeat,X=p.isFciError,z=(0,S.HE)(d).updateBoardingPassInformation,$=(0,S.Od)().MY_TRIPS_URLS,Q=(0,w.LB)(),J=Q.setPassengerList,ee=Q.setContactRequired,re=Q.passengerList,te=Q.errorSavingContact,ne=(0,m.useState)(!1),se=ne[0],ae=ne[1],ie=(null===Z||void 0===Z?void 0:Z.itineraryId)&&(0,S.lO)(y.wb.KEY),oe=(0,S._)(ie),ue=(0,u.Z)(oe,1)[0],de=(0,S.br)({acceptedDangerousItems:se,dangerousItemsStoredValue:ue,itineraryBP:Y}).showDangerousItemsView,le=(0,S.ow)(h,R,y.NV.ORDER).showStatusComponent,ce=(0,T.useResponsiveQuery)(),ge=ce===y.j$.L||ce===y.j$.XL,me=(0,I.mF)(h),pe=me.isErrorBP,he=me.isExpiredBP,fe=me.isPrintableBP,Ee=me.isPendingBP,Pe=me.isContactCenterHelpBP,ve=me.isCodeShareBP,Ce=(0,m.useMemo)((function(){var e=Boolean(null===R||void 0===R?void 0:R.find((function(e){return(null===e||void 0===e?void 0:e.operatingAirlineCode)===y.Sb.LATAM})));return!(null!==R&&void 0!==R&&R.length&&!e)&&re.some((function(e){return e.id===A.passengerId&&e.needsEmergencyContact}))}),[A,R,re]),xe=(0,m.useMemo)((function(){return null!==B&&void 0!==B&&B}),[B]);(0,m.useEffect)((function(){!function(e){var r=e.isExpiredBP,t=e.setExpiredAlertHeight;if(r){var n=document.querySelector("#expiredBP-section");t("".concat(n.offsetHeight,"px"))}else t("0px")}({isExpiredBP:he,setExpiredAlertHeight:W})}),[h]),(0,m.useEffect)((function(){Z&&Object.keys(Z).length&&z(Z)}),[Z]),(0,m.useEffect)((function(){!function(e){var r=e.itineraryBP,t=e.passengers,n=e.setPassengerList;r&&t&&n(null===t||void 0===t?void 0:t.map((function(e){return{id:e.passengerId,number:e.passengerNameNumber,profile:e.profile,needsEmergencyContact:(0,I.g4)({passenger:e,itineraryBP:r})}})))}({itineraryBP:Y,passengers:j,setPassengerList:J})}),[Y,j]);var Se=R&&R.map((function(e){var r,t,n,s,a,i,o,u;return{id:null===e||void 0===e?void 0:e.segmentId,index:null===e||void 0===e?void 0:e.segmentIndex,title:{departure:null===e||void 0===e||null===(r=e.departure)||void 0===r||null===(t=r.city)||void 0===t?void 0:t.name,arrival:null===e||void 0===e||null===(n=e.arrival)||void 0===n||null===(s=n.city)||void 0===s?void 0:s.name},mobileTitle:{departure:null===e||void 0===e||null===(a=e.departure)||void 0===a||null===(i=a.city)||void 0===i?void 0:i.code,arrival:null===e||void 0===e||null===(o=e.arrival)||void 0===o||null===(u=o.city)||void 0===u?void 0:u.code}}})),be=j&&j.map((function(e){return{id:e.passengerId,firstName:e.firstName,lastName:e.lastName}}));return(0,m.useEffect)((function(){!function(e){var r,t=e.lang,n=e.country,s=e.features,a=e.setHomeValue,i=e.setLangValue,o=e.setCountryValue,u=e.setFeatures;(r="".concat(n,"/").concat(t))&&a(r),t&&i(t),n&&o(n),s&&u(s)}({lang:s,country:a,features:i,setHomeValue:H,setLangValue:M,setCountryValue:V,setFeatures:G})}),[s,a]),(0,m.useEffect)((function(){L({user:t,lastName:g,orderId:c,setBoardingPassStatus:P,setLoadingBoardingPass:x,setOrderWithDerivableCkinError:N,setOrderData:F,setContactRequired:ee})}),[c,g]),(0,m.useEffect)((function(){!function(e,r){var t=r.segment,n=r.originalCountry,s=r.isErrorBP,a=r.isContactCenterHelpBP,i=r.showDerivableCheckinError,o=r.boardingPassStatus,u=r.isPendingBP,d=r.orderId,l=r.isCodeShareBP;if(null!==t&&void 0!==t&&t.flightNumber&&n&&!s&&!a&&!i){var c;c=o?u?y.GA.TEMPORARYBP:y.GA.SUBFAMILY:y.GA.ERROR_BOARDING_PASS;var g={order:d,transactionName:y.GA.SUBFAMILY};o&&(g.funnelDetails=function(){return l?"".concat(o,"_").concat(t.operatingAirlineCode):u?y.GA.TEMPORARY:o}),b.analytics.pageLoad({action:y.GA.VIEW,title:e("xp_boardp_web_index_title",{output:"string"}),pageName:c,custom:g})}}(r,{segment:_,originalCountry:o,isErrorBP:pe,isContactCenterHelpBP:Pe,showDerivableCheckinError:xe,boardingPassStatus:h,isPendingBP:Ee,orderId:c,isCodeShareBP:ve})}),[_,h,o,xe]),(0,D.jsxs)(m.Fragment,{children:[fe&&(0,D.jsx)(E.zg,{t:r,segment:_}),(0,D.jsx)(O,{className:"fullheightrow",isPrintableBP:fe,showEmergencyContactForm:Ce,children:k(r,{orderId:c,lastName:g,user:t,setBoardingPassStatus:P,setLoadingBoardingPass:x,setOrderWithDerivableCkinError:N,setOrderData:F,setContactRequired:ee,showDangerousItemsView:de,segments:R,passengers:j,setAcceptedDangerousItems:ae,boardingPassStatus:h,showStatusComponent:le,errorSavingContact:te,acceptEmergencySeat:K,isFciError:X,loadingBoardingPass:v,showDerivableCheckinError:xe,country:a,lang:s,MY_TRIPS_URLS:$,segmentTabs:Se,passengerTabs:be,segment:_,expiredAlertHeight:U,passenger:A,showEmergencyContact:Ce,isDesktop:ge,home:n,originalCountry:o,showEmergencySeatDisclaimer:q})})]})},H=t(39485),M=!0,V=function(e){var r=e.user,t=e.home,n=e.language,s=e.country,a=e.originalCountry,i=e.features,o=(0,H.useTranslation)().t,u=(0,f.useRouter)(),d=(0,S.cs)(u).redirectToCheckinHome;return(0,D.jsx)(D.Fragment,{children:d?null:(0,D.jsx)(w.k2,{children:(0,D.jsx)(F,{t:o,user:r,home:t,lang:n,country:s,originalCountry:a,features:i})})})}},98518:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/boardingpass",function(){return t(63424)}])}},function(e){e.O(0,[774,888,179],(function(){return r=98518,e(e.s=r);var r}));var r=e.O();_N_E=r}]);